## Chapter 3. 모니터링과 로그

3.1 메트릭 vs 로그

3.2 모니터링 기법

3.3 모니터링 패턴 

쿠버네티스에서는 수명이 짧고 다이나믹한 파드의 특성을 살릴 수 있도록 모니터링

3.4 쿠버네티스 메트릭 개요

cAdvisor라는애가 메트릭을 수집 (프로메테우스같은걸 다 들고있는건가?
이전장들의 내용을보면 K8s는 디스크용량이나 현재 인프라 사용량에 비례해서 동작하는 정의들이 꽤있었는데 그런피쳐를 지원하기 위해서라도 필수적으로 생각됨

kube state metrics 이 k8s를 위한 모니터링 도구로 보임

3.5 어떤 메트릭을 모니터링하나?

3.6 모니터링 툴 

influx db - db가 왜 모니터링도구에서 나오나 했는데 모니터링용으로 엄청나게 큰 쓰기부하를 견딜수있게 설계된 db로 보임. 꼭 인프라를 위한 모니터링이 아니라 게임같이 엄청난 로그를 다루는 곳에서도 쓰려나?

aws 컨테이너 인사이트 - 이름만 보면 꼭 k8s가 아니라 그냥 ec2에서 실행중인 컨테이너 로그도 관리해줄것 같은데 될지 알아보는중

3.7 프로메테우스를 이용한 쿠버네티스 모니터링

같은 up & running 시리즈로 아예 프로메테우스 하나만으로 책도 존재할만큼 쓸 수 있는게 다양한것을 보인다.
지금은 대충쓰고있지만 더 잘 쓸 수 있도록 이것도 공부해보는걸로…

3.8 로깅 개요

3.9 로깅 툴

데이터독을 많이사용하는것으로 알고있고 책에서도 운영비용 절감을 위해 hosted service를 추천하는데 내부의 모든 로그가 managed service를 사용하게되면서 외부망으로 타고나가게되는것에 대한 걱정이 되는 부분은 없는가?

3.10 로키 스택을 사용한 로깅

3.11 알림

알림을 너무 많이 보내면 무감각해져서 중요한 이벤트가 뭍힘.
알람은 처음부터 완벽하게 만드는것이 굉장히 힘듬. 점진적을 개선하는식으로 만듬

3.12 모니터링, 로깅, 알림 모범 사례

## Cahpter 4. 구성, 시크릿, RBAC

4.1 컨피그맵과 시크릿을 통한 구성

k8s에서 etcd는 control plane에서만 사용되는줄 알았는데 컨피그맵과 시크릿과 같은 기능을 통해서 파드들이 설정을 공유하는데 활용 할 수 있음.
우리도 비슷하게 etcd를 활용중인데 본문에서 언급한것처럼 개발자가 직접 db값을 까본가면 secret 값을 볼 수 있게 되어있다 이부분 대처가 필요.

4.2 컨피그맵, 시크릿 API 모범 사례

볼륨으로 마운트되어 컨피그맵과 시크릿이 변경될때 감지하도록 만들어 최신버전을 반영
secretKeyRef를 통해서 secret 값을 사용

4.3 시크릿 모범 사례

4.4 RBAC

RBAC을 사용하려면 주체, 규칙, 롤 의 세가지 주요 컴포넌트 정의가 필요
쿠버네티스에서는 보통 어플리케이션이 쿠버네티스 api와 직접 인터렉션 하는일이없기 때문에 RBAC을 사용하는 경우가 드물다.
그래서 본문 내용도 크지 않은것 않은데, 우리는 플랫폼으로 오케스트레이션 도구를 관리하도록 어플리케이션을 만들고있어서 RBAC의 대한 구현과 사용 관리가 적극 필요해 좀 더 많은 학습이 필요 할 듯 하다.

